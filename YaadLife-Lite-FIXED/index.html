<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>YaadLife – Book Your Jamaica Vibes</title>

  <!-- QR Code library -->
  <script src="https://cdn.jsdelivr.net/gh/davidshimjs/qrcodejs/qrcode.min.js"></script>

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{--green:#28a745;--dark:#1a1a1a;--light:#f8f9fa;--gray:#6c757d}
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'Inter',sans-serif;background:#f4f4f4;color:#333;line-height:1.6}
    .container{max-width:900px;margin:0 auto;padding:20px}
    .hero img{width:100%;border-radius:16px;margin-bottom:20px;box-shadow:0 8px 30px rgba(0,0,0,.15)}
    h1,h2{font-weight:700;color:var(--dark)}
    h1{font-size:1.8rem;margin-bottom:16px}
    h2{font-size:1.4rem;margin:24px 0 12px}
    .step{display:none;padding:20px;background:#fff;border-radius:16px;box-shadow:0 4px 20px rgba(0,0,0,.08)}
    .step.active{display:block}
    select,button,input{padding:14px 16px;margin:8px 0;width:100%;font-size:16px;border-radius:12px;border:1px solid #ddd;font-weight:600}
    button{background:var(--green);color:white;border:none;cursor:pointer;transition:.2s}
    button:hover{background:#218838}
    .option-card{display:flex;align-items:center;padding:12px;border:2px solid transparent;border-radius:12px;margin:8px 0;cursor:pointer;transition:.2s}
    .option-card:hover{border-color:var(--green)}
    .option-card.selected{border-color:var(--green);background:#e8f5e9}
    .option-card img{width:80px;height:80px;object-fit:cover;border-radius:8px;margin-right:12px}
    .option-card .info{flex:1}
    .option-card .name{font-weight:600}
    .option-card .price{color:var(--green);font-weight:700}
    .option-card .source{font-size:0.85rem;color:var(--gray)}
    #summary-items .item{display:flex;justify-content:space-between;padding:10px 0;border-bottom:1px solid #eee}
    #summary-items .item:last-child{border:none}
    .total{font-size:1.3rem;font-weight:700;color:var(--dark);margin:16px 0}
    .qr-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:12px;margin-top:20px}
    .qr-item{text-align:center}
    .qr-item img{width:100%;max-width:120px;height:120px}
    .qr-item p{font-size:0.9rem;margin-top:4px;color:var(--gray)}
    #start-button{background:var(--green);color:white;padding:18px;font-size:1.2rem;border-radius:16px;width:100%;max-width:500px;margin:30px auto;display:block}
    .trustpilot{margin-top:30px;text-align:center;font-size:0.9rem;color:var(--gray)}
    .trustpilot a{color:var(--green);text-decoration:none}
  </style>
</head>
<body>
<div class="container">

  <!-- HERO (real placeholder image) -->
  <div class="hero">
    <img src="https://images.unsplash.com/photo-1506929562872-bb421503ef21?w=1200&fit=crop" alt="Jamaica Vibes">
  </div>

  <!-- STEP 0 – Welcome -->
  <div id="step0" class="step active">
    <h1>How can we help you book your vacation package?</h1>
    <button id="start-button">Start Building</button>
    <div class="trustpilot">
      Trusted by 500+ travelers • <a href="#" target="_blank">Read reviews on Trustpilot</a>
    </div>
  </div>

  <!-- STEP 1 – Abroad / Local -->
  <div id="step1" class="step">
    <h2>Are you traveling to Jamaica?</h2>
    <div class="option-card selected" data-value="yes">
      <div class="info"><div class="name">Yes, from abroad</div></div>
    </div>
    <div class="option-card" data-value="no">
      <div class="info"><div class="name">No, I'm local</div></div>
    </div>
  </div>

  <!-- STEP 2 – From city -->
  <div id="step2" class="step">
    <h2>Where are you traveling from?</h2>
    <input type="text" placeholder="e.g. Miami, USA" id="fromCity">
    <button onclick="nextStep(3)">Next</button>
  </div>

  <!-- STEP 3 – Arrival date -->
  <div id="step3" class="step">
    <h2>When do you arrive?</h2>
    <input type="date" id="arriveDate">
    <button onclick="nextStep(4)">Next</button>
  </div>

  <!-- STEP 4 – Choose parish (populated dynamically) -->
  <div id="step4" class="step">
    <h2>Which parish will you stay in?</h2>
    <div id="parish-options"></div>
    <button style="display:none;" id="parish-next" onclick="nextStep(5)">Next</button>
  </div>

  <!-- STEP 5 – Coastal / Inland -->
  <div id="step5" class="step">
    <h2>Inland or Coastal vibe?</h2>
    <div class="option-card" data-value="coastal">
      <img src="https://images.unsplash.com/photo-1506929562872-bb421503ef21?w=80&h=80&fit=crop" alt="Beach">
      <div class="info"><div class="name">Coastal</div></div>
    </div>
    <div class="option-card" data-value="inland">
      <img src="https://images.unsplash.com/photo-1516026672322-bc52d8c0fb80?w=80&h=80&fit=crop" alt="Mountains">
      <div class="info"><div class="name">Inland</div></div>
    </div>
    <button onclick="loadStays()">Next</button>
  </div>

  <!-- STEP 6 – Choose stay -->
  <div id="step6" class="step">
    <h2>Choose your stay</h2>
    <div id="stay-options"></div>
    <button onclick="nextStep(7)">Next to Transport</button>
  </div>

  <!-- STEP 7 – Transport -->
  <div id="step7" class="step">
    <h2>Need a ride?</h2>
    <div id="transport-options"></div>
    <button onclick="nextStep(8)">Next to Tours</button>
  </div>

  <!-- STEP 8 – Tours (optional) -->
  <div id="step8" class="step">
    <h2>Add tours (optional)</h2>
    <div id="tour-options"></div>
    <button onclick="showSummary()">Show My Package</button>
  </div>

  <!-- SUMMARY -->
  <div id="summary" class="step">
    <h2>Your YaadLife Package</h2>
    <div id="summary-items"></div>
    <div class="total">Total: $<span id="total">0</span> USD</div>
    <button onclick="payNow()">Pay & Generate SBT / QR</button>
    <div id="qr-area"></div>
  </div>

</div>

<script>
/* ---------- DATA ---------- */
const MOCK = {
  accommodations: {
    kingston: [
      {name:"Rasta Road Villa",price:150,source:"Local",img:"https://images.unsplash.com/photo-1566073776990-3b7c5c93d3b0?w=400",type:"coastal"},
      {name:"Harbor View Apt",price:80,source:"Airbnb",img:"https://images.unsplash.com/photo-1522706323590-d12735f6b2d4?w=400",type:"coastal"},
      {name:"Kingston Roots GH",price:100,source:"Local",img:"https://images.unsplash.com/photo-1512918728675-ed5a9ecdebfd?w=400",type:"inland"}
    ],
    "st-andrew": [
      {name:"Blue Mountain Cabin",price:200,source:"Local",img:"https://images.unsplash.com/photo-1505843513577-22bb7d21e455?w=400",type:"inland"}
    ]
  },
  transport: { kingston: [
    {name:"Lynk Airport → City",price:25,source:"Lynk"},
    {name:"JUTC Bus",price:2,source:"Public"}
  ]},
  tours: { kingston: [
    {name:"Bob Marley Museum",price:30},
    {name:"Devon House Tour",price:20}
  ]}
};

let state = { from: '', arrive: '', parish: '', vibe: '', stay: null, transport: [], tours: [] };
const parishes = ["kingston","st-andrew","st-thomas","portland","st-mary","st-ann","trelawny","st-james","hanover","westmoreland","st-elizabeth","manchester","clarendon","st-catherine"];

/* ---------- NAVIGATION ---------- */
function nextStep(n) {
  document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
  const target = document.getElementById(n === 9 ? 'summary' : 'step' + n);
  target.classList.add('active');

  /* Auto-load content when a step becomes visible */
  if (n === 4) renderParishes();
  if (n === 7) loadTransport();
  if (n === 8) loadTours();
}

/* ---------- PARISHES ---------- */
function renderParishes() {
  const container = document.getElementById('parish-options');
  container.innerHTML = '';
  parishes.forEach(p => {
    const card = document.createElement('div');
    card.className = 'option-card';
    card.innerHTML = `<div class="info"><div class="name">${p.replace(/-/g,' ').toUpperCase()}</div></div>`;
    card.onclick = () => {
      document.querySelectorAll('#parish-options .option-card').forEach(c => c.classList.remove('selected'));
      card.classList.add('selected');
      state.parish = p;
      document.getElementById('parish-next').style.display = 'block';
    };
    container.appendChild(card);
  });
}

/* ---------- STAYS ---------- */
function loadStays() {
  if (!state.parish) return alert('Pick a parish first');
  const container = document.getElementById('stay-options');
  container.innerHTML = '';
  const items = MOCK.accommodations[state.parish] || [];
  const filtered = state.vibe ? items.filter(i => i.type === state.vibe) : items;

  filtered.forEach(item => {
    const card = document.createElement('div');
    card.className = 'option-card';
    card.innerHTML = `
      <img src="${item.img}" alt="${item.name}">
      <div class="info">
        <div class="name">${item.name}</div>
        <div class="source">${item.source}</div>
        <div class="price">$${item.price}/night</div>
      </div>
    `;
    card.onclick = () => {
      document.querySelectorAll('#stay-options .option-card').forEach(c => c.classList.remove('selected'));
      card.classList.add('selected');
      state.stay = {...item, fee: item.price * 0.05};
    };
    container.appendChild(card);
  });
  nextStep(6);
}

/* ---------- TRANSPORT ---------- */
function loadTransport() {
  const container = document.getCElementById('transport-options');
  container.innerHTML = '';
  const items = MOCK.transport[state.parish] || [];
  items.forEach(t => {
    const chk = document.createElement('div');
    chk.className = 'option-card';
    chk.innerHTML = `<div class="info"><div class="name">${t.name} – $${t.price}</div></div>`;
    chk.onclick = () => {
      chk.classList.toggle('selected');
      if (chk.classList.contains('selected')) {
        state.transport.push(t);
      } else {
        state.transport = state.transport.filter(x => x.name !== t.name);
      }
    };
    container.appendChild(chk);
  });
}

/* ---------- TOURS ---------- */
function loadTours() {
  const container = document.getElementById('tour-options');
  container.innerHTML = '';
  const items = MOCK.tours.kingston || [];
  items.forEach(t => {
    const chk = document.createElement('div');
    chk.className = 'option-card';
    chk.innerHTML = `<div class="info"><div class="name">${t.name} – $${t.price}</div></div>`;
    chk.onclick = () => {
      chk.classList.toggle('selected');
      if (chk.classList.contains('selected')) {
        state.tours.push(t);
      } else {
        state.tours = state.tours.filter(x => x.name !== t.name);
      }
    };
    container.appendChild(chk);
  });
}

/* ---------- SUMMARY ---------- */
function showSummary() {
  const container = document.getElementById('summary-items');
  container.innerHTML = '';
  let total = 0;

  const add = (label, price, fee = 0) => {
    total += price + fee;
    const div = document.createElement('div');
    div.className = 'item';
    div.innerHTML = `<span>${label}</span><span>$${price}${fee?` + <strong>$${fee}</strong>`:''}</span>`;
    container.appendChild(div);
  };

  if (state.stay) add(state.stay.name, state.stay.price, state.stay.fee);
  state.transport.forEach(t => add(t.name, t.price));
  state.tours.forEach(t => add(t.name, t.price));

  document.getElementById('total').textContent = total.toFixed(2);
  nextStep(9);   // 9 → summary step
}

/* ---------- PAY & QR ---------- */
function payNow() {
  const total = parseFloat(document.getElementById('total').textContent);
  if (total === 0) return alert('Add at least one item!');

  const sbt = {
    id: Date.now(),
    user: 'YaadUser-' + Math.random().toString(36).substr(2,5),
    package: {...state, total},
    timestamp: new Date().toISOString()
  };

  // Download JSON SBT
  const blob = new Blob([JSON.stringify(sbt, null, 2)], {type:'application/json'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url; a.download = `yaadlife-sbt-${sbt.id}.json`;
  a.click();

  // QR codes
  const qrArea = document.getElementById('qr-area');
  qrArea.innerHTML = '<h3>Scan to redeem</h3><div class="qr-grid"></div>';
  const grid = qrArea.querySelector('.qr-grid');

  const items = [];
  if (state.stay) items.push(`Stay: ${state.stay.name}`);
  state.transport.forEach(t => items.push(`Ride: ${t.name}`));
  state.tours.forEach(t => items.push(`Tour: ${t.name}`));

  items.forEach(txt => {
    const div = document.createElement('div');
    div.className = 'qr-item';
    const qrDiv = document.createElement('div');
    new QRCode(qrDiv, {text: txt, width:120, height:120, colorDark: "#000", colorLight: "#fff"});
    div.appendChild(qrDiv);
    const p = document.createElement('p');
    p.textContent = txt;
    div.appendChild(p);
    grid.appendChild(div);
  });

  alert('SBT downloaded & QR codes ready!');
}

/* ---------- EVENT BINDINGS ---------- */
document.getElementById('start-button').onclick = () => nextStep(1);

document.getElementById('step1').addEventListener('click', e => {
  const card = e.target.closest('.option-card');
  if (!card) return;
  document.querySelectorAll('#step1 .option-card').forEach(c => c.classList.remove('selected'));
  card.classList.add('selected');
  nextStep(card.dataset.value === 'yes' ? 2 : 4);
});

document.getElementById('fromCity').addEventListener('change', () => {
  state.from = document.getElementById('fromCity').value;
});

document.getElementById('arriveDate').addEventListener('change', () => {
  state.arrive = document.getElementById('arriveDate').value;
});

document.getElementById('parish-next').addEventListener('click', () => {
  if (!state.parish) return alert('Select a parish');
  nextStep(5);
});

/* Coastal / Inland selection */
document.getElementById('step5').addEventListener('click', e => {
  const card = e.target.closest('.option-card');
  if (!card) return;
  document.querySelectorAll('#step5 .option-card').forEach(c => c.classList.remove('selected'));
  card.classList.add('selected');
  state.vibe = card.dataset.value;
});
</script>
</body>
</html>
