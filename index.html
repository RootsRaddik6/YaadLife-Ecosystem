<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>YaadLife – Book Your Jamaica Vibes</title>
  <script src="https://cdn.jsdelivr.net/gh/davidshimjs/qrcodejs/qrcode.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="icon" href="data:,">
  <style>
    :root{--green:#28a745;--dark:#1a1a1a;--gray:#6c757d}
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'Inter',sans-serif;background:#f4f4f4;color:#333;line-height:1.6}
    .container{max-width:900px;margin:0 auto;padding:20px}
    .hero img{width:100%;border-radius:16px;margin-bottom:20px;box-shadow:0 8px 30px rgba(0,0,0,.15);display:block}
    h1,h2{font-weight:700;color:var(--dark);margin:24px 0 16px;text-align:center}
    h1{font-size:1.8rem}
    h2{font-size:1.4rem}
    .step{display:none;padding:20px;background:#fff;border-radius:16px;box-shadow:0 4px 20px rgba(0,0,0,.08);margin-bottom:20px}
    .step.active{display:block}
    button{background:var(--green);color:white;border:none;padding:16px 24px;margin:20px 0 8px;font-size:16px;border-radius:12px;cursor:pointer;width:100%;font-weight:600;transition:.2s}
    button:hover{background:#218838}
    .option-card{display:flex;align-items:center;padding:14px;border:2px solid transparent;border-radius:12px;margin:10px 0;cursor:pointer;transition:.2s;background:#fafafa}
    .option-card:hover{border-color:var(--green)}
    .option-card.selected{border-color:var(--green);background:#e8f5e9}
    .option-card img{width:80px;height:80px;object-fit:cover;border-radius:8px;margin-right:14px;flex-shrink:0}
    .option-card .info{flex:1}
    .option-card .name{font-weight:600;font-size:1.1rem}
    .option-card .price{color:var(--green);font-weight:700;font-size:1.1rem}
    .option-card .source{font-size:0.9rem;color:var(--gray)}
    #summary-items .item{display:flex;justify-content:space-between;padding:12px 0;border-bottom:1px solid #eee;font-size:1.1rem}
    .total{font-size:1.5rem;font-weight:700;margin:24px 0;color:var(--dark);text-align:center}
    .qr-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:16px;margin-top:20px}
    .qr-item{text-align:center;background:#f8f9fa;padding:12px;border-radius:12px}
    .qr-item p{font-size:0.9rem;margin-top:8px;color:var(--gray);word-break:break-word}
    #start-button{max-width:500px;margin:40px auto;padding:20px;font-size:1.3rem}
    @media (min-width:600px){.qr-grid{grid-template-columns:repeat(3,1fr)}}
  </style>
</head>
<body>
<div class="container">
  <div class="hero">
    <img src="https://images.unsplash.com/photo-1506929562872-bb421503ef21?w=1200&fit=crop" alt="Jamaica Vibes">
  </div>

  <div id="step0" class="step active">
    <h1>How can we help you book your vacation package?</h1>
    <button id="start-button">Start Building</button>
  </div>

  <div id="step1" class="step">
    <h2>Are you traveling to Jamaica?</h2>
    <div class="option-card selected" data-value="yes"><div class="info"><div class="name">Yes, from abroad</div></div></div>
    <div class="option-card" data-value="no"><div class="info"><div class="name">No, I'm local</div></div></div>
  </div>

  <div id="step2" class="step">
    <h2>Where are you traveling from?</h2>
    <input type="text" placeholder="e.g. Miami, USA" id="fromCity">
    <button id="btn-step2">Next</button>
  </div>

  <div id="step3" class="step">
    <h2>When do you arrive?</h2>
    <input type="date" id="arriveDate">
    <button id="btn-step3">Next</button>
  </div>

  <div id="step4" class="step">
    <h2>Which parish will you stay in?</h2>
    <div id="parish-options"></div>
    <button id="parish-next" style="display:none">Next</button>
  </div>

  <div id="step5" class="step">
    <h2>Inland or Coastal vibe?</h2>
    <div class="option-card" data-value="coastal">
      <img src="https://images.unsplash.com/photo-1506929562872-bb421503ef21?w=80&h=80&fit=crop" alt="Coastal">
      <div class="info"><div class="name">Coastal</div></div>
    </div>
    <div class="option-card" data-value="inland">
      <img src="https://images.unsplash.com/photo-1516026672322-bc52d8c0fb80?w=80&h=80&fit=crop" alt="Inland">
      <div class="info"><div class="name">Inland</div></div>
    </div>
    <button id="btn-vibe">Next → Choose Stay</button>
  </div>

  <div id="step6" class="step">
    <h2>Choose your stay</h2>
    <div id="stay-options"></div>
    <button id="btn-stay">Next to Transport</button>
  </div>

  <div id="step7" class="step">
    <h2>Need a ride?</h2>
    <div id="transport-options"></div>
    <button id="btn-transport">Next to Tours</button>
  </div>

  <div id="step8" class="step">
    <h2>Add tours (optional)</h2>
    <div id="tour-options"></div>
    <button id="btn-tours">Show My Package</button>
  </div>

  <div id="summary" class="step">
    <h2>Your YaadLife Package</h2>
    <div id="summary-items"></div>
    <div class="total">Total: $<span id="total">0</span> USD</div>
    <button id="btn-pay">Pay & Generate SBT / QR</button>
    <div id="qr-area"></div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  // ... all your MOCK, state, parishes, nextStep, renderParishes, loadStays, loadTransport, loadTours, showSummary, payNow stay the same ...

  // ALL BUTTONS
  document.getElementById('start-button').onclick = () => nextStep(1);
  document.getElementById('step1').addEventListener('click', e => {
    const c = e.target.closest('.option-card');
    if(c){
      document.querySelectorAll('#step1 .option-card').forEach(x=>x.classList.remove('selected'));
      c.classList.add('selected');
      nextStep(c.dataset.value==='yes'?2:4);
    }
  });
  document.getElementById('btn-step2').onclick = () => { state.from = document.getElementById('fromCity').value || "Unknown"; nextStep(3); };
  document.getElementById('btn-step3').onclick = () => { state.arrive = document.getElementById('arriveDate').value; nextStep(4); renderParishes(); };
  document.getElementById('parish-next').onclick = () => { if(state.parish) nextStep(5); else alert('Please select a parish'); };
  document.getElementById('btn-vibe').onclick = () => { const s = document.querySelector('#step5 .option-card.selected'); if(!s) return alert('Choose vibe!'); state.vibe = s.dataset.value; loadStays(); nextStep(6); };
  document.getElementById('btn-stay').onclick = () => { if(!state.stay) return alert('Pick a stay!'); loadTransport(); nextStep(7); };
  document.getElementById('btn-transport').onclick = () => nextStep(8);
  document.getElementById('btn-tours').onclick = () => showSummary();
  document.getElementById('btn-pay').onclick = () => payNow();

  document.getElementById('step5').addEventListener('click', e => {
    const c = e.target.closest('.option-card');
    if(c){
      document.querySelectorAll('#step5 .option-card').forEach(x=>x.classList.remove('selected'));
      c.classList.add('selected');
    }
  });

  // FIXED PARISH SELECTION — this was the only bug
  document.getElementById('step4').addEventListener('click', e => {
    const c = e.target.closest('.option-card');
    if(c){
      document.querySelectorAll('#parish-options .option-card').forEach(x=>x.classList.remove('selected'));
      c.classList.add('selected');
      state.parish = c.textContent.trim().toLowerCase().replace(/ /g,'-');
      document.getElementById('parish-next').style.display = 'block';
    }
  });
});
</script>
</body>
</html>
