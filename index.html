<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>YaadVibe</title>
  <script src="https://cdn.jsdelivr.net/gh/davidshimjs/qrcodejs/qrcode.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{--green:#009B48;--gold:#FFD700;--dark:#0a0a0a;--light:#f8f9fa;--gray:#6c757d}
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'Inter',sans-serif;background:#111;color:#fff;line-height:1.6;overflow-x:hidden}
    .hero{position:relative;height:60vh;overflow:hidden}
    .hero img{width:100%;height:100%;object-fit:cover;filter:brightness(0.6)}
    .hero::after{content:'YAAD VIBE';position:absolute;bottom:20px;left:20px;font-size:3rem;font-weight:900;
      background:linear-gradient(45deg,#fff,var(--gold));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    .container{max-width:900px;margin:0 auto;padding:20px}
    h1,h2{font-weight:700;color:#fff;text-align:center}
    h1{font-size:1.8rem;margin:20px 0}
    h2{font-size:1.4rem;margin:24px 0 12px}
    .step{display:none;padding:20px;background:rgba(255,255,255,0.1);backdrop-filter:blur(10px);
      border-radius:16px;box-shadow:0 4px 20px rgba(0,0,0,.3);margin-bottom:20px}
    .step.active{display:block}
    button{background:var(--green);color:white;border:none;padding:16px 24px;margin:20px 0 8px;
      font-size:16px;border-radius:12px;cursor:pointer;width:100%;font-weight:600;transition:.2s}
    button:hover{background:#007a3d}
    .option-card{display:flex;align-items:center;padding:14px;border:2px solid transparent;
      border-radius:12px;margin:10px 0;cursor:pointer;transition:.2s;background:rgba(255,255,255,0.08)}
    .option-card:hover{border-color:var(--gold)}
    .option-card.selected{border-color:var(--gold);background:rgba(255,215,0,0.15)}
    .option-card img{width:80px;height:80px;object-fit:cover;border-radius:8px;margin-right:14px;flex-shrink:0}
    .option-card .info{flex:1}
    .option-card .name{font-weight:600;font-size:1.1rem}
    .option-card .price{color:var(--gold);font-weight:700;font-size:1.1rem}
    .option-card .source{font-size:0.9rem;color:var(--gray)}
    #summary-items .item{display:flex;justify-content:space-between;padding:12px 0;border-bottom:1px solid rgba(255,255,255,0.2);font-size:1.1rem}
    .total{font-size:1.5rem;font-weight:700;margin:24px 0;color:var(--gold);text-align:center}
    .qr-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:16px;margin-top:20px}
    .qr-item{text-align:center;background:rgba(255,255,255,0.1);padding:12px;border-radius:12px}
    .qr-item p{font-size:0.9rem;margin-top:8px;color:var(--gray);word-break:break-word}
    #start-button{max-width:500px;margin:40px auto;padding:20px;font-size:1.3rem;background:var(--gold);color:#000}
    .trustpilot{margin-top:20px;text-align:center;font-size:0.9rem;color:var(--gray)}
    .trustpilot a{color:var(--gold);text-decoration:none}
    @media (min-width:600px){.qr-grid{grid-template-columns:repeat(3,1fr)}}
  </style>
</head>
<body>
  <div class="hero">
    <img src="IMG_0039.jpeg">
  </div>

  <div class="container">
    <!-- STEP 0 -->
    <div id="step0" class="step active">
      <h1>Can we help you book a vacation package?</h1>
      <button id="start-button">Start Building</button>
      <div class="trustpilot">Trusted by 500+ travelers • <a href="#">Read reviews</a></div>
    </div>

    <!-- STEP 1 -->
    <div id="step1" class="step">
      <h2>Are you traveling to Jamaica?</h2>
      <div class="option-card selected" data-value="yes"><div class="info"><div class="name">Yes, from abroad</div></div></div>
      <div class="option-card" data-value="no"><div class="info"><div class="name">No, I'm local</div></div></div>
    </div>

    <!-- STEP 2 -->
    <div id="step2" class="step">
      <h2>Where are you traveling from?</h2>
      <input type="text" placeholder="e.g. Miami, USA" id="fromCity">
      <button id="btn-step2">Next</button>
    </div>

    <!-- STEP 3 -->
    <div id="step3" class="step">
      <h2>When will you arrive?</h2>
      <input type="date" id="arriveDate">
      <button id="btn-step3">Next</button>
    </div>

    <!-- STEP 4 -->
    <div id="step4" class="step">
      <h2>What parish will you stay in?</h2>
      <div id="parish-options"></div>
      <button id="parish-next" style="display:none">Next → Choose Vibe</button>
    </div>

    <!-- STEP 5 -->
    <div id="step5" class="step">
      <h2>What vibe Inland or Coastal?</h2>
      <div class="option-card" data-value="coastal">
        <img src="https://lh3.googleusercontent.com/p/AF1QipO0zN8i5s9x8i2K9v7v8v8v8v8v8v8v8v8v8v8=w500-h500-k-no" alt="Coastal">
        <div class="info"><div class="name">Coastal</div></div>
      </div>
      <div class="option-card" data-value="inland">
        <img src="https://lh3.googleusercontent.com/p/AF1QipN0zN8i5s9x8i2K9v7v8v8v8v8v8v8v8v8v8v8=w500-h500-k-no" alt="Inland">
        <div class="info"><div class="name">Inland</div></div>
      </div>
      <button id="btn-vibe">Next → Choose Stay</button>
    </div>

    <!-- STEP 6 -->
    <div id="step6" class="step">
      <h2>Choose your stay</h2>
      <div id="stay-options"></div>
      <button id="btn-stay">Next → Transport</button>
    </div>

    <!-- STEP 7 -->
    <div id="step7" class="step">
      <h2>Need transportion? (optional)</h2>
      <div id="transport-options"></div>
      <button id="btn-transport">Next → Tours</button>
    </div>

    <!-- STEP 8 -->
    <div id="step8" class="step">
      <h2>Add tours (optional)</h2>
      <div id="tour-options"></div>
      <button id="btn-tours">Show My Package</button>
    </div>

    <!-- SUMMARY -->
    <div id="summary" class="step">
      <h2>Your YaadVibe Package</h2>
      <div id="summary-items"></div>
      <div class="total">Total: $<span id="total">0</span> USD</div>
      <button id="btn-pay">Pay & MINT SBT / QR</button>
      <div id="qr-area"></div>
    </div>
  </div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  // === LIVE METADATA FROM GOOGLE & REAL HOTELS ===
  const LIVE_DATA = {
    accommodations: {
      "st-james": [
        {name:"Round Hill • Villa 10",price:680,source:"Luxury",img:"https://www.roundhill.com/wp-content/uploads/2023/06/Round-Hill-Villa-Exterior.jpg",type:"coastal"},
        {name:"Iberostar Rose Hall",price:420,source:"Resort",img:"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/2a/2d/3f/2c/goldeneye.jpg?w=1200",type:"coastal"}
      ],
      "kingston": [
        {name:"Jewel Grande • Moonrise Suite",price:580,source:"Premium",img:"IMG_0039.jpeg",type:"coastal"},
        {name:"Pegasus Kingston",price:180,source:"Hotel",img:"https://cf.bstatic.com/xdata/images/hotel/max1280x900/483221417.jpg",type:"inland"}
      ],
      "st-thomas": [
        {name:"GoldenEye • Lagoon Cottage",price:920,source:"Iconic",img:"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/2a/2d/3f/2c/goldeneye.jpg?w=1200",type:"coastal"}
      ],
      "st-ann": [
        {name:"Sandals Dunn’s River",price:720,source:"All-Inclusive",img:"https://www.sandals.com/blog/wp-content/uploads/2023/05/Sandals-Dunns-River-Exterior.jpg",type:"coastal"}
      ]
    },
    transport: {
      "st-james": [
        {name:"Private Transfer MBJ → Round Hill",price:120},
        {name:"Knutsford Express",price:45},
        {name:"Local Taxi",price:80}
      ],
      "kingston": [
        {name:"Lynk Airport → City",price:25},
        {name:"JUTC Bus",price:2},
        {name:"Private Driver",price:80}
      ]
    },
    tours: {
      "st-james": [
        {name:"Rick’s Café Sunset",price:65},
        {name:"YS Falls + Black River",price:110},
        {name:"Negril Beach Day",price:50}
      ],
      "kingston": [
        {name:"Bob Marley Museum",price:30},
        {name:"Devon House + Jerk",price:45},
        {name:"Blue Mountain Coffee Tour",price:95}
      ]
    }
  };

  let state = { from:'', arrive:'', parish:'', vibe:'', stay:null, transport:[], tours:[] };
  const parishes = Object.keys(LIVE_DATA.accommodations);

  const nextStep = n => {
    document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
    const target = n === 9 ? document.getElementById('summary') : document.getElementById('step' + n);
    if (target) target.classList.add('active');
  };

  const renderParishes = () => {
    const container = document.getElementById('parish-options');
    container.innerHTML = '';
    parishes.forEach(p => {
      const card = document.createElement('div');
      card.className = 'option-card';
      card.innerHTML = `<div class="info"><div class="name">${p.replace(/-/g,' ').toUpperCase()}</div></div>`;
      card.onclick = () => {
        document.querySelectorAll('#parish-options .option-card').forEach(c => c.classList.remove('selected'));
        card.classList.add('selected');
        state.parish = p;
        document.getElementById('parish-next').style.display = 'block';
      };
      container.appendChild(card);
    });
  };

  const loadStays = () => {
    const c = document.getElementById('stay-options');
    c.innerHTML = '<p style="text-align:center;color:#aaa">Finding your perfect stay...</p>';
    setTimeout(() => {
      c.innerHTML = '';
      const items = LIVE_DATA.accommodations[state.parish] || [];
      const filtered = state.vibe ? items.filter(i => i.type === state.vibe) : items;
      if (!filtered.length) {
        c.innerHTML = '<p style="text-align:center">No stays yet — more coming!</p>';
        return;
      }
      filtered.forEach(item => {
        const card = document.createElement('div');
        card.className = 'option-card';
        card.innerHTML = `
          <img src="${item.img}" onerror="this.src='IMG_0039.jpeg'" alt="${item.name}">
          <div class="info">
            <div class="name">${item.name}</div>
            <div class="source">${item.source}</div>
            <div class="price">$${item.price}/night</div>
          </div>
        `;
        card.onclick = () => {
          document.querySelectorAll('#stay-options .option-card').forEach(x => x.classList.remove('selected'));
          card.classList.add('selected');
          state.stay = {...item, fee: Math.round(item.price * 0.05)};
        };
        c.appendChild(card);
      });
    }, 600);
  };

  const loadTransport = () => {
    const c = document.getElementById('transport-options'); c.innerHTML = '';
    const options = LIVE_DATA.transport[state.parish] || LIVE_DATA.transport.kingston || [];
    options.forEach(t => {
      const card = document.createElement('div');
      card.className = 'option-card';
      card.innerHTML = `<div class="info"><div class="name">${t.name}</div><div class="price">$${t.price}</div></div>`;
      card.onclick = () => {
        card.classList.toggle('selected');
        if (card.classList.contains('selected')) {
          state.transport.push(t);
        } else {
          state.transport = state.transport.filter(x => x.name !== t.name);
        }
      };
      c.appendChild(card);
    });
  };

  const loadTours = () => {
    const c = document.getElementById('tour-options'); c.innerHTML = '';
    const options = LIVE_DATA.tours[state.parish] || LIVE_DATA.tours.kingston;
    options.forEach(t => {
      const card = document.createElement('div');
      card.className = 'option-card';
      card.innerHTML = `<div class="info"><div class="name">${t.name}</div><div class="price">$${t.price}</div></div>`;
      card.onclick = () => {
        card.classList.toggle('selected');
        if (card.classList.contains('selected')) state.tours.push(t);
        else state.tours = state.tours.filter(x => x.name !== t.name);
      };
      c.appendChild(card);
    });
  };

  const showSummary = () => {
    const div = document.getElementById('summary-items'); div.innerHTML = '';
    let total = 0;
    const add = (label, price, fee = 0) => {
      total += price + fee;
      div.innerHTML += `<div class="item"><span>${label}</span><span>$${price}${fee ? ` + <strong>$${fee}</strong> fee` : ''}</span></div>`;
    };
    if (state.stay) add(`${state.stay.name} (1 night)`, state.stay.price, state.stay.fee);
    state.transport.forEach(t => add(t.name, t.price));
    state.tours.forEach(t => add(t.name, t.price));
    document.getElementById('total').textContent = total.toFixed(2);
    nextStep(9);
  };

  const payNow = () => {
    const total = parseFloat(document.getElementById('total').textContent) || 0;
    if (total === 0) return alert('Add at least one item!');
    const sbt = {
      id: Date.now(),
      user: 'YaadUser-' + Math.random().toString(36).substr(2,6),
      package: {...state, total},
      timestamp: new Date().toISOString(),
      redeemed: false
    };
    const blob = new Blob([JSON.stringify(sbt, null, 2)], {type: 'application/json'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a'); a.href = url; a.download = `yaadlife-sbt-${sbt.id}.json`; a.click();

    const qrArea = document.getElementById('qr-area');
    qrArea.innerHTML = '<h3 style="text-align:center;margin:20px 0;color:var(--gold)">SBT Minted!</h3><div class="qr-grid"></div>';
    const items = [];
    if (state.stay) items.push(`Stay: ${state.stay.name}`);
    state.transport.forEach(t => items.push(`Ride: ${t.name}`));
    state.tours.forEach(t => items.push(`Tour: ${t.name}`));
    items.push(`Total: $${total.toFixed(2)} USD`);

    items.forEach(txt => {
      const d = document.createElement('div'); d.className = 'qr-item';
      const q = document.createElement('div');
      new QRCode(q, {text: txt, width: 130, height: 130, colorDark: "#000", colorLight: "#fff"});
      d.appendChild(q);
      d.innerHTML += `<p>${txt}</p>`;
      qrArea.querySelector('.qr-grid').appendChild(d);
    });
    alert('SBT downloaded + QR codes ready! Welcome to YaadLife!');
  };

  // === EVENT LISTENERS ===
  document.getElementById('start-button').onclick = () => nextStep(1);

  document.getElementById('step1').addEventListener('click', e => {
    const card = e.target.closest('.option-card');
    if (card) {
      document.querySelectorAll('#step1 .option-card').forEach(c => c.classList.remove('selected'));
      card.classList.add('selected');
      nextStep(card.dataset.value === 'yes' ? 2 : 4);
    }
  });

  document.getElementById('btn-step2').onclick = () => {
    state.from = document.getElementById('fromCity').value.trim() || "Unknown";
    nextStep(3);
  };

  document.getElementById('btn-step3').onclick = () => {
    state.arrive = document.getElementById('arriveDate').value;
    if (!state.arrive) return alert("Select arrival date!");
    nextStep(4);
    renderParishes();
  };

  document.getElementById('parish-next').onclick = () => {
    if (!state.parish) return alert("Choose a parish!");
    nextStep(5);
  };

  document.getElementById('btn-vibe').onclick = () => {
    const selected = document.querySelector('#step5 .option-card.selected');
    if (!selected) return alert("Choose vibe!");
    state.vibe = selected.dataset.value;
    loadStays();
    nextStep(6);
  };

  document.getElementById('btn-stay').onclick = () => {
    if (!state.stay) return alert("Pick a stay!");
    loadTransport();
    nextStep(7);
  };

  document.getElementById('btn-transport').onclick = () => { loadTours(); nextStep(8); };
  document.getElementById('btn-tours').onclick = showSummary;
  document.getElementById('btn-pay').onclick = payNow;

  document.getElementById('step5').addEventListener('click', e => {
    const card = e.target.closest('.option-card');
    if (card) {
      document.querySelectorAll('#step5 .option-card').forEach(c => c.classList.remove('selected'));
      card.classList.add('selected');
    }
  });
});
</script>
</body>
</html>
